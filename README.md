TODOS:
- [x] generalize parameter names & positions
- [x] handle non-intrinsic types correctly
- [x] correctly extract compilation options
- [x] allow injecting options
- [ ] comment this code
- [ ] write readme
- [ ] tests
- [ ] Automate prettification, test running, etc
- [ ] make npm library out of this
- [ ] blog post


